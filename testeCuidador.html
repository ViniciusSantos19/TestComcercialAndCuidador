<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="teste.css">
  <title>Teste de Envio de Dados</title>
</head>

<body>
  <h2>Cadastro Cuidador</h2>
  <form id="cuidadorForm">
    <div>
      <label for="nome">Nome:</label>
      <input type="text" id="nome" name="nome" required />
    </div>
    <div>
      <label for="nomeApresentacao">Nome Apresentação:</label>
      <input type="text" id="nomeApresentacao" name="nomeApresentacao" required />
    </div>
    <div>
      <label for="telefone">Telefone:</label>
      <input type="text" id="telefone" name="telefone" required />
    </div>
    <div>
      <label for="rg">Rg:</label>
      <input type="text" id="rg" name="rg" required />
    </div>
    <div>
      <label for="rua">Rua:</label>
      <input type="text" id="rua" name="rua" required />
    </div>
    <div>
      <label for="Estado">Estado:</label>
      <input type="text" id="estado" name="estado" required />
    </div>
    <div>
      <label for="cep">Cep:</label>
      <input type="text" id="cep" name="cep" required />
    </div>
    <div>
      <label for="cidade">Cidade:</label>
      <input type="text" id="cidade" name="cidade" required />
    </div>
    <div>
      <label for="bairro">Bairro:</label>
      <input type="text" id="bairro" name="bairro" required />
    </div>
    <div>
      <label for="complemento">Complemeto:</label>
      <input type="text" id="complemento" name="complemento" required />
    </div>
    <div>
      <label for="numero">Numero:</label>
      <input type="text" id="numero" name="numero" required />
    </div>
    <div>
      <label for="nomePai">Nome do pai:</label>
      <input type="text" id="nomePai" name="nomePai" required />
    </div>
    <div>
      <label for="nomeMae">Nome da mãe:</label>
      <input type="text" id="nomeMae" name="nomeMae" required />
    </div>
    <div>
      <label for="dataNascimento">Data de Nascimento:</label>
      <input type="date" id="dataNascimento" name="dataNascimento" required />
    </div>
    <div>
      <label for="peso">Peso (kg):</label>
      <input type="number" step="0.01" id="peso" name="peso" required />
    </div>
    <div>
      <label for="altura">Altura (cm):</label>
      <input type="number" step="0.1" id="altura" name="altura" required />
    </div>
    <div>
      <label for="imageInput">Selecione uma imagem:</label>
      <input type="file" id="imageInput" accept="image/*" required />
    </div>
    <div>
      <label for="escolaridade">Escolaridade:</label>
      <select id="escolaridade" name="escolaridade" required>
        <option value="">Selecione...</option>
        <option value="NÍVEL_MÉDIO">Nível Médio</option>
        <option value="NÍVEL_SUPERIOR">Nível Superior</option>
        <option value="NÍVEL_FUNDAMENTAL">Nível Fundamental</option>
      </select>
    </div>
    <div>
      <label for="titulação">Titulação:</label>
      <input type="text" id="titulacao" name="titulacao" required />
    </div>
    <div>
      <label for="tempoExperiencia">Tempo de Experiência (anos):</label>
      <input type="number" id="tempoExperiencia" name="tempoExperiencia" required />
    </div>
    <div> <label for="experiencias">Experiências:</label>
      <div> <input type="checkbox" id="experiencia1" name="experiencias" value="string"> <label
          for="experiencia1">Patologia1</label> </div>
      <div> <input type="checkbox" id="experiencia2" name="experiencias" value="string"> <label
          for="experiencia2">Patologia2</label> </div>
      <div> <input type="checkbox" id="experiencia3" name="experiencias" value="string"> <label
          for="experiencia3">Patologia3</label> </div>
    </div>
    <div> <label for="habilidades">Habilidades:</label>
      <div> <input type="checkbox" id="habilidade1" name="habilidades" value="string"> <label
          for="habilidade1">Habilidade1</label> </div>
      <div> <input type="checkbox" id="habilidade2" name="habilidades" value="string"> <label
          for="habilidade2">Habilidade2</label> </div>
      <div> <input type="checkbox" id="habilidade3" name="habilidades" value="string"> <label
          for="habilidade3">Habilidade3</label> </div>
    </div>
    <div> <label for="apresentacao">Apresentação:</label> <textarea id="apresentacao" name="apresentacao" rows="4"
        cols="50" required></textarea> </div>
    <button type="submit">Enviar</button>
  </form>

  <script>
    document.getElementById("cuidadorForm").addEventListener("submit", function (event) {
      event.preventDefault();

   const experiencias = Array.from(document.querySelectorAll('input[name="experiencias"]:checked')).map(checkbox => ({ nome: checkbox.value }));
   console.log(experiencias)
   const habilidades = Array.from(document.querySelectorAll('input[name="habilidades"]:checked')).map(checkbox => ({ nome: checkbox.value }));
    console.log(habilidades)

      const formData = new FormData();
      const cuidador = {
    nome: document.getElementById("nome").value,
    nomeApresentacao: document.getElementById("nomeApresentacao").value,
    telefone: document.getElementById("telefone").value,
    rg: document.getElementById("rg").value,
    rua: document.getElementById("rua").value,
    cidade: document.getElementById("cidade").value,
    estado: document.getElementById("estado").value,
    cep: document.getElementById("cep").value,
    bairro: document.getElementById("bairro").value,
    complemento: document.getElementById("complemento").value,
    numero: document.getElementById("numero").value,
    nomePai: document.getElementById("nomePai").value,
    nomeMae: document.getElementById("nomeMae").value,
    dataNascimento: document.getElementById("dataNascimento").value,
    peso: parseFloat(document.getElementById("peso").value),
    altura: parseFloat(document.getElementById("altura").value),
    escolaridade: document.getElementById("escolaridade").value,
    titulacao: document.getElementById("titulacao").value,
    tempoExperiencia: parseInt(document.getElementById("tempoExperiencia").value),
    experiencias: experiencias,
    habilidades: habilidades,
    apresentacao: document.getElementById("apresentacao").value
  };

      formData.append("cuidador", new Blob([JSON.stringify(cuidador)],
        {type: 'application/json'}));
         const imageFile = document.getElementById("imageInput").files[0]; if (imageFile) {formData.append("image", imageFile);}

      fetch("http://localhost:8080/api/cuidadores/v1", {
        method: "POST",
        body: formData,
        headers: {
          'Accept': 'application/json'
        },
      })
        .then((response) => response.json())
        .then((data) => {
          console.log("Resposta do servidor:", data);
          alert("Dados enviados com sucesso!");
        })
        .catch((error) => {
          console.error("Erro ao enviar a requisição:", error);
          alert("Erro ao enviar os dados.");
        });
    });
  </script>
</body>

</html>
